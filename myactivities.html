<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <title>Sportify</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="HandheldFriendly" content="True">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <!-- Bootstrap v4.3.1 CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/theme.css">
  <!-- Font Awesome Free 5.10.2 CSS JS -->
  <script defer src="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.10.2/js/solid.min.js"></script>
  <script defer src="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.10.2/js/brands.min.js"></script>
  <script defer src="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.10.2/js/fontawesome.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <style type="text/css">
    span div {
      margin: 5px
    }

    .horzontal div button {
      width: 100%;
      height: 30px;
      border: solid 1px;
      pointer-events: none;
    }

    .vertical div button {
      width: 100%;
      height: 60px;
      border: solid 1px;
      pointer-events: none;
    }

    .flexible div button {
      border: solid rgb(255, 217, 0);
    }

    ._my {
      background-color: rgb(5, 182, 182);
    }

    .mybutton {
      background-color: rgb(119, 179, 134);
      border: none;
      text-align: center;

    }

    /* Custom styles for the buttons */
    .selected-button {
      background-color: #ffea00;
      color: #ffffff;
      font-weight: bold;
      width: 200px;
      height: 40px;
    }


    .my-activity-button {
      background-color: #ff0000;
      color: #ffffff;
      font-weight: bold;
      width: 200px;
      height: 40px;
    }
  </style>
  </style>
  <!-- <script>
    var timer;
    var estimatedarrivetime = sessionStorage.getItem('estimatedarrivetime')
    function cancel() {
      alert("successfully canceled");
      sessionStorage.removeItem('reservedparkplace')
      sessionStorage.removeItem('duration')
      sessionStorage.removeItem('estimatedarrivetime')
    }
    function init() {
      document.getElementById("currentusername").innerHTML = sessionStorage.getItem('username');
      if (sessionStorage.getItem('reservedparkplace')) {
        showMyParkingPlace()
        document.getElementById("hint").innerHTML = "You need join the basketball activity at 2024-09-05 19:00 " //+ dateToString(new Date(parseInt(estimatedarrivetime)))
        timer = setInterval("countdown()", 1000);
      } else {
        document.getElementById("hint").innerHTML = "You need join the basketball activity at 2024-09-05 19:00 "
      }
    }
    function showMyParkingPlace() {
      if (sessionStorage.getItem('reservedparkplace')) {
        document.getElementById(sessionStorage.getItem('reservedparkplace')).classList.add("_my")
      }
    }
    function dateToString(time) {
      year = time.getFullYear();//年
      month = time.getMonth() + 1;//月
      day = time.getDate();//日
      hour = time.getHours();//时
      minutes = time.getMinutes();//分
      return year + "." + p(month) + "." + p(day) + " " + p(hour) + ":" + p(minutes)
    }
    //月日时分秒小于10补0
    function p(s) { return s < 10 ? '0' + s : s; }

    //倒计时
    function countdown() {
      document.getElementById("hint").style = "white-space:pre;";
      let date = new Date()
      let remainingtime = estimatedarrivetime - date.getTime();
      if (remainingtime < 0) {
        document.getElementById("hint").innerHTML = "Your appointment has expired"
        sessionStorage.removeItem('reservedparkplace')
        sessionStorage.removeItem('duration')
        sessionStorage.removeItem('estimatedarrivetime')
        clearInterval(timer)
      }
      else if (remainingtime <= 600 * 1000) {
        document.getElementById("hint").innerHTML = "You need join the basketball activity at 2024-09-05 19:00 " //+ p(parseInt(remainingtime / 60 / 1000)) + ":" + p(parseInt(remainingtime / 1000) % 60)
      }
    }



  </script> -->
</head>

<body class="default" onload="init()">
  <!-- Preloading -->
  <div class="preloading">
    <div class="wrap-preload">
      <div class="cssload-loader"></div>
    </div>
  </div>
  <!-- .Preloading -->
  <!-- Sidebar left -->
  <nav id="sidebarleft" class="sidenav">
    <div id="dismiss">
      <i class="fas fa-times"></i>
    </div>
    <div class="sidebar-header">
      <h3>Account</h3>
    </div>
    <div class="sdprofile">
      <div class="sdp-left">
        <div class="sd-name" id="currentusername">Lilia Doe</div>
        <div class="sd-status" id="currentusermobile">+86 18688886666</div>
      </div>
    </div>
    <ul class="list-unstyled components">
      <li>
        <a href="myactivities.html"><i class="fas fa-home"></i>My Activities</a>
      </li>

      <li>
        <a href="#pagereserve" data-toggle="collapse" aria-expanded="false"><i class="fas fa-receipt"></i>Activities
          <span><i class="fas fa-caret-down"></i></span></a>
        <ul class="collapse collapsible-body" id="pagereserve">
          <li>
            <a href="join.html">Join</a>
          </li>
          <li>
            <a href="create.html">Create</a>
          </li>
        </ul>
      </li>
      <!--<li>
        <a href="create.html"><i class="fas fa-car"></i>Park</a>
      </li>-->
      <li>
        <a href="myclubs.html"><i class="fas fa-car"></i>My Clubs</a>
      </li>
      <li>
        <a href="index.html"><i class="fas fa-map"></i>Logout</a>
      </li>
    </ul>
  </nav>
  <!-- .Sidebar left -->
  <!-- Sidebar right -->
  <nav id="sidebarright" class="sidenav">
    <div id="dismiss">
      <i class="fas fa-times"></i>
    </div>
    <div class="sidebar-header">
      <h3>Notifications</h3>
    </div>
    <ul class="right-menu">
      <li class="right-menu-item">
        <a href="#">
          <i class="fas fa-envelope"></i>
          <div class="ntitle">Your activity has been scheduled</div>
          <div class="desc"> It will start 5h later</div>
        </a>
      </li>
    </ul>
  </nav>
  <!-- .Sidebar right-->
  <!-- Header  -->
  <nav class="navbar navbar-expand-lg navbar-light bg-header">
    <div class="container-fluid">
      <button type="button" id="sidebarleftbutton" class="btn">
        <i class="fas fa-align-left"></i>
      </button>
      <div class="logo">Sportify</div>
      <button type="button" id="sidebarrightbutton" class="btn">
        <div class="notif">
          <i class="fas fa-bell"></i>
          <i class="fas fa-circle "></i>
        </div>
      </button>
    </div>
  </nav>
  <!-- .Header  -->
  <!-- Content  -->
  <div>
    <div class="content-wrap">
      <div class="subsite">
        <div class="row">
          <div class="col-md-12">
            <div class="subsite-heading">
              My Activities
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div id="myActivitiesList" class="layout"
              style="text-align: center;font-weight: bold;color:rgb(255,255,255);border: 3px;">


            </div>
            <br>
            <div style="text-align: center;">
              <p id="hint"></p>
            </div>
            <div style="text-align:center">
              <a href="./myactivities.html">
                <button class="theme-button mcbutton" onclick="cancel()">Cancel Reservation</button>
              </a>

            </div>

          </div>
        </div>
      </div>

    </div>
  </div>
  <!-- .Content  -->
  <!-- Botom Panel  -->
  <div class="bottom-panel">
    <div class="bp-col">
      <a href="join.html">
        <div class="bp-icon"><img src="img/Join.png" alt="icon"> </div>
        <div class="bp-text">Join</div>
      </a>
    </div>
    <div class="bp-col">
      <a href="create.html">
        <div class="bp-icon"><img src="img/create.png" alt="icon"></div>
        <div class="bp-text">Create</div>
      </a>
    </div>
    <div class="bp-col">
      <a href="club.html">
        <div class="bp-icon"><img src="img/club.png" alt="icon"></div>
        <div class="bp-text">Club</div>
      </a>
    </div>
    <div class="bp-col">
      <a href="setting.html">
        <div class="bp-icon"><img src="img/ipaccount.png" alt="icon"></div>
        <div class="bp-text">Account</div>
      </a>
    </div>
  </div>
  <!-- .Bottom Panel  -->
  <div class="overlay"></div>
  <!-- Optional JavaScript -->
  <script>


    function removeFromMyActivities(item) {
      // Get the list of activities from localStorage
      var myActivities = localStorage.getItem('myActivities');
      myActivities = myActivities ? JSON.parse(myActivities) : [];

      // Remove the item from the myActivities array
      var index = myActivities.indexOf(item);
      if (index > -1) {
        myActivities.splice(index, 1);
      }

      // Update the myActivities in localStorage
      localStorage.setItem('myActivities', JSON.stringify(myActivities));

      // Update the myActivitiesList
      var myActivitiesList = document.getElementById('myActivitiesList');
      myActivitiesList.innerHTML = '';

      // Loop through the updated myActivities array and create buttons
      myActivities.forEach(function (activity) {
        var button = document.createElement('button');
        button.textContent = activity;
        button.onclick = function () {
          removeFromMyActivities(activity); // Call the removeFromMyActivities function with the clicked activity
        };

        myActivitiesList.appendChild(button);

        var lineBreak = document.createElement('br');
        myActivitiesList.appendChild(lineBreak);
      });
    }

    // Function to handle cancel button click
    function cancel() {
      // Get the selected activity from localStorage
      var selectedActivity = localStorage.getItem('selectedActivity');

      // Call the removeFromMyActivities function with the selected activity
      if (selectedActivity) {
        removeFromMyActivities(selectedActivity);
      }

      // Clear the selected activity from localStorage
      localStorage.removeItem('selectedActivity');
    }

    // Get the list of activities from localStorage
    var myActivities = localStorage.getItem('myActivities');
    myActivities = myActivities ? JSON.parse(myActivities) : [];

    // Get the container element to display the activities
    var myActivitiesList = document.getElementById('myActivitiesList');

    // // Loop through the activities and create buttons


    myActivities.forEach(function (activity) {
      var button = document.createElement('button');
      button.textContent = activity;
      button.onclick = function () {
        // Remove the selected-button class from all buttons and add my-activity-button back
        var buttons = document.querySelectorAll('#myActivitiesList button');

        buttons.forEach(function (btn) {
          btn.classList.remove('selected-button');
          btn.classList.add('my-activity-button');
        });


        // Add the selected-button class to the clicked button
        // button.classList.toggle('selected-button my-activity-button')
        if
          (button.classList.
            contains
            (
              "my-activity-button"
            )) {
          button.classList.
            remove
            (
              "my-activity-button"
            ); button.classList.
              add
              (
                "selected-button"
              );
        }
        else {
          button.classList.
            add
            (
              "selected-button"
            );
        }

        // Store the clicked activity in localStorage
        localStorage.setItem('selectedActivity', activity);
      };

      button.classList.add('my-activity-button'); // Add the custom class to the button
      myActivitiesList.appendChild(button);

      var lineBreak = document.createElement('br');
      myActivitiesList.appendChild(lineBreak);
      var lineBreak = document.createElement('br');
      myActivitiesList.appendChild(lineBreak);
    });

  </script>
  <!-- jQuery v3.4.1 -->
  <script src="https://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js"></script>
  <!--  Bootstrap v4.3.1 JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <!--  Custom JS -->
  <script src="js/theme.js"></script>
  <script src="js/script.js"></script>

</body>

</html>