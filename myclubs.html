<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <title>Sportify</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="HandheldFriendly" content="True">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- Bootstrap v4.3.1 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/theme.css">
    <!-- Font Awesome Free 5.10.2 CSS JS -->
    <script defer src="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.10.2/js/solid.min.js"></script>
    <script defer src="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.10.2/js/brands.min.js"></script>
    <script defer src="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.10.2/js/fontawesome.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <style>
        span div {
            margin: 3px;
        }

        .horzontal div input {
            width: 100%;
            height: 30px;
        }

        .vertical div input {
            width: 100%;
            height: 63px;
        }

        .club {
            width: 250px;
            display: inline-block;
            background-color: rgb(0, 164, 239);
            border: none;
        }

        .clublabel {
            font-size: 80%;
            text-align: center;

        }

        /* Custom styles for the buttons */
        .selected-button {
            background-color: #ffea00;
            color: #ffffff;
            font-weight: bold;
            width: 200px;
            height: 40px;
        }


        .my-club-button {
            background-color: #ff0000;
            color: #ffffff;
            font-weight: bold;
            width: 200px;
            height: 40px;
        }
    </style>
    <script>
        // var lastselected;
        // function selectspace(element) {
        //     if (element.className.indexOf("club") > -1) {
        //         document.getElementById(lastselected).style.color = "black";
        //         document.getElementById(lastselected).style.border = "";
        //         document.getElementById(lastselected).style.fontWeight = 'normal';
        //         element.style.color = "#FFF";
        //         element.style.border = "3px solid #063";
        //         element.style.fontWeight = 'bold';
        //         element.name = "place";
        //         lastselected = element.id;
        //     }
        // }

        // function show() {
        //     alert("Successfully reserved: " + lastselected.toUpperCase());
        // }
        // function init() {
        //     document.getElementById("currentusername").innerHTML = sessionStorage.getItem('username');
        //     lastselected = "A1";
        //     document.getElementById(lastselected).style.color = "#FFF";
        //     document.getElementById(lastselected).style.border = "3px solid #063";
        //     document.getElementById(lastselected).style.fontWeight = 'bold';
        // }
        // function reserve() {
        //     alert("successful reserved: " + lastselected);
        //     sessionStorage.removeItem('estimatedduration')
        //     let now = new Date().getTime()
        //     sessionStorage.setItem('estimatedarrivetime', now + 600 * 1000)
        //     sessionStorage.setItem('reservedparkplace', lastselected)
        // }


    </script>
    <script src="js/club.js"></script>
</head>

<body class="default" onload="init()">
    <!-- Preloading -->
    <div class="preloading">
        <div class="wrap-preload">
            <div class="cssload-loader"></div>
        </div>
    </div>
    <!-- .Preloading -->
    <!-- Sidebar left -->
    <nav id="sidebarleft" class="sidenav">
        <div id="dismiss">
            <i class="fas fa-times"></i>
        </div>
        <div class="sidebar-header">
            <h3>Account</h3>
        </div>
        <div class="sdprofile">
            <div class="sdp-left">
                <div class="sd-name" id="currentusername">Lilia Doe</div>
                <div class="sd-status" id="currentusermobile">+86 18688886666</div>
            </div>
        </div>
        <ul class="list-unstyled components">
            <li>
                <a href="myactivities.html"><i class="fas fa-home"></i>My Activities</a>
            </li>

            <li>
                <a href="#pagereserve" data-toggle="collapse" aria-expanded="false"><i
                        class="fas fa-receipt"></i>Activities
                    <span><i class="fas fa-caret-down"></i></span></a>
                <ul class="collapse collapsible-body" id="pagereserve">
                    <li>
                        <a href="join.html">Join</a>
                    </li>
                    <li>
                        <a href="create.html">Create</a>
                    </li>
                </ul>
            </li>
            <!--<li>
        <a href="create.html"><i class="fas fa-car"></i>Park</a>
      </li>-->
            <li>
                <a href="club.html"><i class="fas fa-car"></i>Club</a>
            </li>
            <li>
                <a href="index.html"><i class="fas fa-map"></i>Logout</a>
            </li>
        </ul>
    </nav>
    <!-- .Sidebar left -->
    <!-- Sidebar right -->
    <nav id="sidebarright" class="sidenav">
        <div id="dismiss">
            <i class="fas fa-times"></i>
        </div>
        <div class="sidebar-header">
            <h3>Notifications</h3>
        </div>
        <ul class="right-menu">
            <li class="right-menu-item">
                <a href="#">
                    <i class="fas fa-envelope"></i>
                    <div class="ntitle">Your club has been scheduled</div>
                    <div class="desc"> It will start 5h later</div>
                </a>
            </li>
        </ul>
    </nav>
    <!-- .Sidebar right-->
    <!-- Header  -->
    <nav class="navbar navbar-expand-lg navbar-light bg-header">
        <div class="container-fluid">
            <button type="button" id="sidebarleftbutton" class="btn">
                <i class="fas fa-align-left"></i>
            </button>
            <div class="logo">Sportify</div>
            <button type="button" id="sidebarrightbutton" class="btn">
                <div class="notif">
                    <i class="fas fa-bell"></i>
                    <i class="fas fa-circle "></i>
                </div>
            </button>
        </div>
    </nav>
    <!-- .Header  -->
    <!-- Content  -->
    <div>
        <div class="content-wrap">
            <div class="subsite">
                <div class="row">
                    <div class="col-md-12">
                        <div class="subsite-heading">
                            My Clubs
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div id="myClubList" class="layout"
                            style="text-align: center;font-weight: bold;color:rgb(255,255,255);border: 3px;">


                        </div>
                        <br>
                        <div style="text-align: center;">
                            <p id="hint"></p>
                        </div>
                        <div style="text-align:center">
                            <a href="./myclubs.html">
                                <button class="theme-button mcbutton" onclick="cancel()">Cancel Reservation</button>
                            </a>

                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>
    <!-- .Content  -->
    <!-- Botom Panel  -->
    <div class="bottom-panel">
        <div class="bp-col">
            <a href="join.html">
                <div class="bp-icon"><img src="img/Join.png" alt="icon"> </div>
                <div class="bp-text">Join</div>
            </a>
        </div>
        <div class="bp-col">
            <a href="create.html">
                <div class="bp-icon"><img src="img/create.png" alt="icon"></div>
                <div class="bp-text">Create</div>
            </a>
        </div>
        <div class="bp-col">
            <a href="club.html">
                <div class="bp-icon"><img src="img/club.png" alt="icon"></div>
                <div class="bp-text">Club</div>
            </a>
        </div>
        <div class="bp-col">
            <a href="setting.html">
                <div class="bp-icon"><img src="img/ipaccount.png" alt="icon"></div>
                <div class="bp-text">Account</div>
            </a>
        </div>
    </div>
    <!-- .Bottom Panel  -->
    <div class="overlay"></div>
    <!-- Optional JavaScript -->

    <script>
        function removeFromMyClubs(item) {
            // Get the list of Clubs from localStorage
            var myClubs = localStorage.getItem('myClubs');
            myClubs = myClubs ? JSON.parse(myClubs) : [];

            // Remove the item from the myClubs array
            var index = myClubs.indexOf(item);
            if (index > -1) {
                myClubs.splice(index, 1);
            }

            // Update the myClubs in localStorage
            localStorage.setItem('myClubs', JSON.stringify(myClubs));

            // Update the myClubsList
            var myClubList = document.getElementById('myClubList');
            myClubList.innerHTML = '';

            // Loop through the updated myClubs array and create buttons
            myClubs.forEach(function (club) {
                var button = document.createElement('button');
                button.textContent = club;
                button.onclick = function () {
                    removeFromMyClubs(club); // Call the removeFromMyClubs function with the clicked club
                };

                myClubList.appendChild(button);
                button.classList.remove('selected-button');
                button.classList.add('my-club-button');

                var lineBreak = document.createElement('br');
                myClubList.appendChild(lineBreak);
            });
        }

        // Function to handle cancel button click
        function cancel() {
            // Get the selected club from localStorage
            var selectedclub = localStorage.getItem('selectedclub');

            // Call the removeFromMyClubs function with the selected club
            if (selectedclub) {
                removeFromMyClubs(selectedclub);
            }

            // Clear the selected club from localStorage
            localStorage.removeItem('selectedclub');
        }

        // Get the list of Clubs from localStorage
        var myClubs = localStorage.getItem('myClubs');
        myClubs = myClubs ? JSON.parse(myClubs) : [];

        // Get the container element to display the Clubs
        var myClubList = document.getElementById('myClubList');

        // // Loop through the Clubs and create buttons

        var lastSelectedClub;
        myClubs.forEach(function (club) {
            var button = document.createElement('button');
            button.textContent = club;
            button.onclick = function (e) {
                console.log(e)
                // Remove the selected-button class from all buttons and add my-club-button back
                var buttons = document.querySelectorAll('#myClubsList button');
                lastSelectedClub && lastSelectedClub.classList.remove('selected-button');
                lastSelectedClub && lastSelectedClub.classList.add('my-club-button');
                lastSelectedClub = e.target;
                console.log(lastSelectedClub);

                // buttons.forEach(function (bjupt) {
                //     bjupt.classList.remove('selected-button');
                //     bjupt.classList.add('my-club-button');
                // });


                // Add the selected-button class to the clicked button
                // button.classList.toggle('selected-button my-club-button')
                if
                    (button.classList.
                        contains
                        (
                            "my-club-button"
                        )) {
                    button.classList.
                        remove
                        (
                            "my-club-button"
                        ); button.classList.
                            add
                            (
                                "selected-button"
                            );
                }
                else {
                    button.classList.
                        add
                        (
                            "selected-button"
                        );
                }

                // Store the clicked club in localStorage
                localStorage.setItem('selectedclub', club);
            };

            button.classList.add('my-club-button'); // Add the custom class to the button
            myClubList.appendChild(button);

            var lineBreak = document.createElement('br');
            myClubList.appendChild(lineBreak);
            var lineBreak = document.createElement('br');
            myClubList.appendChild(lineBreak);
        });

    </script>
    <!-- jQuery v3.4.1 -->
    <script src="https://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js"></script>
    <!--  Bootstrap v4.3.1 JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <!--  Custom JS -->
    <script src="js/theme.js"></script>
    <script src="js/club.js"></script>
</body>

</html>